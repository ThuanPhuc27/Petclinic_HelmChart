######### Deployment ########
deployment:
  create: true

appName: petclinic-api-gateway
namespace: petclinic-dev

#spec
replicaCount: 1
revisionHistoryLimit: 11

rollingUpdate:
  maxSurge: "25%"
  maxUnavailable: "25%"

pullFromPrivateRegistry:
  enabled: true
  secretName: "dockerhub"

initContainers:
  - name: wait-for-config-server
    image: darthcabs/tiny-tools:1
    command:
      ["sh", "-c", "until curl -s http://petclinic-config-server-service:8888/; do echo waiting for config server; sleep 5; done"]

  - name: wait-for-discovery-server
    image: darthcabs/tiny-tools:1
    command:
      ["sh", "-c", "until curl -s http://petclinic-discovery-server-service:8761/; do echo waiting for discovery server; sleep 5; done"]

appImage: "thuanlp/spring-petclinic-api-gateway"
appVersion: "latest"
containerPort: 8080

volumes:
  - configMap:
      defaultMode: 420
      name: "petclinic-api-gateway-application-properties-configmap"
    name: "petclinic-api-gateway-application-properties-config-volume"

volumeMounts:
  - name: "petclinic-api-gateway-application-properties-config-volume"
    mountPath: /app/config/application.properties
    subPath: application.properties

######### Service ########
service:
  create: true
  type: NodePort
  port: 8080
  targetPort: 8080
  nodePort: 30089

######### ConfigMap ########
configmap:
  api-gateway:
    create: true